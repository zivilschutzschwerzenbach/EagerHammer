<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<link
	href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css"
	rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<style type="text/css">
	body {
		  font-family: Arial, sans serif;
		  font-size: 11px;
	}
	#hand_b {
	  width:31px;
	  height:31px;
	  background-image: url(http://google.com/mapfiles/ms/t/Bsu.png);
	}
	#hand_b.selected {
	  background-image: url(http://google.com/mapfiles/ms/t/Bsd.png);
	}

	#placemark_b {
	  width:31px;
	  height:31px;
	  background-image: url(http://google.com/mapfiles/ms/t/Bmu.png);
	}
	#placemark_b.selected {
	  background-image: url(http://google.com/mapfiles/ms/t/Bmd.png);
	}
	#line_b {
	  width:31px;
	  height:31px;
	  background-image: url(http://google.com/mapfiles/ms/t/Blu.png);
	}
	#line_b.selected {
	  background-image: url(http://google.com/mapfiles/ms/t/Bld.png);
	}
		#shape_b {
	  width:31px;
	  height:31px;
	  background-image: url(http://google.com/mapfiles/ms/t/Bpu.png);
	}
	#shape_b.selected {
	  background-image: url(http://google.com/mapfiles/ms/t/Bpd.png);
	}
	* {
	margin: 0px;
	padding: 0px;
}

html {
	height: 100%
}

body {
	height: 100%;
	margin: 0px;
	padding: 0px;
}

#map_canvas {
	height: 100%
}

#shelf {
	position: fixed;
	top: 10px;
	left: 10px;
	height: 1500px;
	width: 200px;
	background: white;
	opacity: 0.8;
}

#draggable {
	position: absolute;
	top: 10px, left:10px;
	width: 30px;
	height: 30px;
	z-index: 1000000000;
}
</style>

<script type="text/javascript">
$(document).ready(function() {
$("#tote").draggable({helper: 'clone',
stop: function(e) {
    var point=new google.maps.Point(e.pageX,e.pageY);
    var ll=overlay.getProjection().fromContainerPixelToLatLng(point);
    placeMarker(ll,'images/tote.gif');
    }
});
});

$(document).ready(function() {
$("#verletzte").draggable({helper: 'clone',
stop: function(e) {
    var point=new google.maps.Point(e.pageX,e.pageY);
    var ll=overlay.getProjection().fromContainerPixelToLatLng(point);
    placeMarker(ll,'images/verletzte.gif');
    }
});
});


$(document).ready(function() {
$("#draggable").draggable({helper: 'clone',
stop: function(e) {
    var point=new google.maps.Point(e.pageX,e.pageY);
    var ll=overlay.getProjection().fromContainerPixelToLatLng(point);
    placeMarker(ll,'images/obdachlose.gif');
    }
});
});


</script>
<script type="text/javascript"
	src="http://maps.google.com/maps/api/js?key=AIzaSyCCa01wBVhTL60GR4fEF0dFz2PPuOCyVTc&sensor=false">
</script>
<script type="text/javascript">
var $map;
var $latlng;
var overlay;




function initialize() {
var $latlng = new google.maps.LatLng(47.381211, 8.68);
var myOptions = {
  zoom: 14,
  center: $latlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  mapTypeControlOptions: {
    style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,
    position: google.maps.ControlPosition.TOP_RIGHT },
     zoomControl: true,
zoomControlOptions: {
    style: google.maps.ZoomControlStyle.LARGE,
    position: google.maps.ControlPosition.RIGHT_TOP
},
scaleControl: true,
scaleControlOptions: {
    position: google.maps.ControlPosition.TOP_RIGHT
},
streetViewControl: false,

  panControl:false,

};

$map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

overlay = new google.maps.OverlayView();
overlay.draw = function() {};
overlay.setMap($map);
} 


function placeMarker(location,image) {
  var marker = new google.maps.Marker({
  position: location, 
  map: $map,
  draggable: true,
  icon: image
  });

}

var COLORS = [["red", "#ff0000"], ["orange", "#ff8800"], ["green","#008000"],
              ["blue", "#000080"], ["purple", "#800080"]];
var options = {};
var lineCounter_ = 0;
var shapeCounter_ = 0;
var markerCounter_ = 0;
var colorIndex_ = 0;
var featureTable_;
var map;

function select(buttonId) {
  document.getElementById("hand_b").className="unselected";
  document.getElementById("shape_b").className="unselected";
  document.getElementById("line_b").className="unselected";
  document.getElementById("placemark_b").className="unselected";
  document.getElementById(buttonId).className="selected";
}

function stopEditing() {
  select("hand_b");
}

function getColor(named) {
  return COLORS[(colorIndex_++) % COLORS.length][named ? 0 : 1];
}

function getIcon(color) {
  var icon = new google.maps.Icon();
  icon.image = "http://google.com/mapfiles/ms/micons/" + color + ".png";
  icon.iconSize = new google.maps.Size(32, 32);
  icon.iconAnchor = new google.maps.Point(15, 32);
  return icon;
}

function startShape() {
  select("shape_b");
  var color = getColor(false);
  var polygon = new google.maps.Polygon([], color, 2, 0.7, color, 0.2);
  startDrawing(polygon, "Shape " + (++shapeCounter_), function() {
    var cell = this;
    var area = polygon.getArea();
    cell.innerHTML = (Math.round(area / 10000) / 100) + "km<sup>2</sup>";
  }, color);
}

function startLine() {
  select("line_b");
  var color = getColor(false);
  var line = new google.maps.Polyline([], color);
  startDrawing(line, "Line " + (++lineCounter_), function() {
    var cell = this;
    var len = line.getLength();
    cell.innerHTML = (Math.round(len / 10) / 100) + "km";
  }, color);
}

function addFeatureEntry(name, color) {
  currentRow_ = document.createElement("tr");
  var colorCell = document.createElement("td");
  currentRow_.appendChild(colorCell);
  colorCell.style.backgroundColor = color;
  colorCell.style.width = "1em";
  var nameCell = document.createElement("td");
  currentRow_.appendChild(nameCell);
  nameCell.innerHTML = name;
  var descriptionCell = document.createElement("td");
  currentRow_.appendChild(descriptionCell);
  featureTable_.appendChild(currentRow_);
  return {desc: descriptionCell, color: colorCell};
}

function startDrawing(poly, name, onUpdate, color) {
  poliy.draw($map);
  poly.enableDrawing(options);
  poly.enableEditing({onEvent: "mouseover"});
  poly.disableEditing({onEvent: "mouseout"});
  google.maps.event.addListener(poly, "endline", function() {
    select("hand_b");
    var cells = addFeatureEntry(name, color);
    google.maps.event.bind(poly, "lineupdated", cells.desc, onUpdate);
    google.maps.event.addListener(poly, "click", function($latlng, index) {
      if (typeof index == "number") {
        poly.deleteVertex(index);
      } else {
        var newColor = getColor(false);
        cells.color.style.backgroundColor = newColor
        poly.setStrokeStyle({color: newColor, weight: 4});
      }
    });
  });
}

function placeMarkerOld() {
  select("placemark_b");
  var listener = google.maps.event.addListener(map, "click", function(overlay, latlng) {
    if (latlng) {
      select("hand_b");
      google.maps.event.removeListener(listener);
      var color = getColor(true);
      var marker = new google.maps.Marker($latlng, {icon: getIcon(color), draggable: true});
      $map.addOverlay(poly);
      var cells = addFeatureEntry("Placemark " + (++markerCounter_), color);
      updateMarker(marker, cells);
      google.maps.event.addListener(marker, "dragend", function() {
        updateMarker(marker, cells);
      });
      google.maps.event.addListener(marker, "click", function() {
        updateMarker(marker, cells, true);
      });
    }
  });
}

function updateMarker(marker, cells, opt_changeColor) {
  if (opt_changeColor) {
    var color = getColor(true);
    marker.setImage(getIcon(color).image);
    cells.color.style.backgroundColor = color;
  }
  var latlng = marker.getPoint();
  cells.desc.innerHTML = "(" + Math.round(latlng.y * 100) / 100 + ", " +
  Math.round(latlng.x * 100) / 100 + ")";
}

</script>

</head>


<body onload="initialize()">
	<div id="map_canvas"></div>
	<div id='shelf'>
		Drag the image<br />

	<table>
			<tr>
				<td><img id="tote" src='images/tote.gif' /><br></td>
				<td><img id="verletzte" src='images/verletzte.gif' /><br>
				</td>
			</tr>
			<tr>
				<td><img id="draggable	" src='images/obdachlose.gif' /><br></td>
				<td><div id="hand_b" onclick="stopEditing()"/></td>
				<td><div id="placemark_b" onclick="placeMarkerOld()"/></td>
				<td><div id="line_b" onclick="startLine()"/></td>
				<td><div id="shape_b" onclick="startShape()"/></td>
				
 
			</tr>
				<input type="hidden" id="featuredetails" rows=2>
				</input>
				<p>To draw on the map, click on one of the buttons and then click on the map.  Double-click to stop drawing a line or shape. Click on an element to change color. To edit a line or shape, mouse over it and drag the points.  Click on a point to delete it.
				</p>
	</table>
	<a href="http://google.de/"  onclick="return confirm('Möchten Sie googlen?');">google</a>
</body></html>
</body>
</html>